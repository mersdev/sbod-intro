<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercedes-Benz Digital Key - Friend Access</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mercedes-blue': '#00adef',
                        'mercedes-dark': '#1a1a1a',
                        'mercedes-gray': '#6b7280',
                        'mercedes-light': '#f8fafc'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-mercedes-light min-h-screen">
    <!-- Header -->
    <div class="bg-white shadow-sm">
        <div class="px-6 py-4">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 rounded-full overflow-hidden">
                    <img src="public/female.png" alt="Profile" class="w-full h-full object-cover">
                </div>
                <div>
                    <h1 class="text-xl font-bold text-mercedes-dark">Jane Doe</h1>
                    <p class="text-mercedes-gray text-sm">First-time user</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Vehicle Information -->
    <div class="px-6 py-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
            <div class="p-6">
                <div class="flex items-center space-x-4">
                    <div class="flex-shrink-0">
                        <img src="public/CLE.png" alt="Mercedes-Benz CLE" class="w-20 h-16 object-cover object-center rounded-lg">
                    </div>
                    <div class="flex-1 text-left">
                        <h2 class="text-lg font-bold text-mercedes-dark">PEP Fleet Test Car</h2>
                        <div class="mt-2 space-y-1">
                            <div class="flex items-center space-x-2 text-sm text-mercedes-gray">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
                                </svg>
                                <span>CLE 300 4MATIC Coupe</span>
                            </div>
                            <div class="flex items-center space-x-2 text-sm text-mercedes-gray">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                <span>Wisma Mercedes-Benz</span>
                            </div>
                            <div class="flex items-center space-x-2 text-sm text-mercedes-gray">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    <path d="M9 17V7h4a3 3 0 0 1 0 6H9"/>
                                </svg>
                                <span>SBD0501</span>
                            </div>
                            <div class="flex items-center space-x-2 text-sm text-mercedes-gray">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <span>Available</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Access Controls -->
    <div class="px-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100">
            <div class="p-6">
                <h3 class="text-lg font-bold text-mercedes-dark mb-6 text-center">Vehicle Controls</h3>
                
                <!-- Primary Control - Engine -->
                <div class="mb-6">
                    <button id="engineBtn" onclick="toggleEngine()" class="w-full bg-mercedes-blue hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-105 flex items-center justify-center space-x-3">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                        </svg>
                        <span id="engineText">Start Engine</span>
                    </button>
                </div>

                <!-- Secondary Controls -->
                <div class="grid grid-cols-2 gap-4">
                    <button id="lockBtn" onclick="toggleLock()" class="flex flex-col items-center p-4 border-2 border-green-500 bg-green-50 rounded-xl hover:bg-green-100 transition-colors">
                        <svg id="lockIcon" class="w-8 h-8 text-green-600 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/>
                        </svg>
                        <span id="lockText" class="text-sm font-bold text-green-600">Locked</span>
                        <span class="text-xs text-green-500 mt-1">Tap to unlock</span>
                    </button>

                    <button onclick="showHornModal()" class="flex flex-col items-center p-4 border-2 border-gray-300 rounded-xl hover:bg-gray-50 transition-colors">
                        <svg class="w-8 h-8 text-mercedes-gray mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M9 12h.01M15 12h.01M12 12h.01"/>
                        </svg>
                        <span class="text-sm font-bold text-mercedes-gray">Horn</span>
                        <span class="text-xs text-mercedes-gray mt-1">Locate vehicle</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Access Details -->
    <div class="px-6 py-6">
        <div class="bg-white rounded-xl shadow-sm border border-gray-100">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-lg font-bold text-mercedes-dark">Access Details</h3>
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                        <span class="text-sm font-medium text-green-600">Active</span>
                    </div>
                </div>

                <!-- Time Remaining -->
                <div class="text-center mb-6">
                    <div class="text-3xl font-bold text-mercedes-dark mb-2">
                        <span id="timeRemaining">2d 15h 30m</span>
                    </div>
                    <div class="text-sm text-mercedes-gray mb-4">Access expires in</div>
                    
                    <!-- Progress Bar -->
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
                        <div id="progressBar" class="bg-gradient-to-r from-green-500 to-mercedes-blue h-2 rounded-full transition-all duration-1000" style="width: 65%"></div>
                    </div>
                    
                    <div class="text-xs text-mercedes-gray">
                        Valid until June 25, 2025 at 11:30 PM
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Horn Confirmation Modal -->
    <div id="hornModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl p-6 w-full max-w-sm">
                <div class="text-center">
                    <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-bold text-mercedes-dark mb-2">Sound Horn</h3>
                    <p class="text-mercedes-gray mb-6">This will help you locate the vehicle by sounding the horn twice.</p>
                    <div class="flex space-x-3">
                        <button onclick="hideHornModal()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-mercedes-gray hover:bg-gray-50 transition-colors">
                            Cancel
                        </button>
                        <button onclick="confirmHorn()" class="flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors">
                            Sound Horn
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Engine Confirmation Modal -->
    <div id="engineModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl p-6 w-full max-w-sm">
                <div class="text-center">
                    <div class="w-16 h-16 bg-mercedes-blue bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-mercedes-blue" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-bold text-mercedes-dark mb-2">Start Engine</h3>
                    <p class="text-mercedes-gray mb-6">Please confirm with Face ID or Touch ID to start the engine.</p>
                    <div class="flex space-x-3">
                        <button onclick="hideEngineModal()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-mercedes-gray hover:bg-gray-50 transition-colors">
                            Cancel
                        </button>
                        <button onclick="confirmEngine()" class="flex-1 px-4 py-2 bg-mercedes-blue text-white rounded-lg hover:bg-blue-600 transition-colors">
                            Confirm
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let engineRunning = false;
        let vehicleLocked = true;
        let timeLeft = 2 * 24 * 60 * 60 + 15 * 60 * 60 + 30 * 60; // 2d 15h 30m in seconds
        let totalTime = 3 * 24 * 60 * 60; // 3 days total

        function updateCountdown() {
            const days = Math.floor(timeLeft / (24 * 60 * 60));
            const hours = Math.floor((timeLeft % (24 * 60 * 60)) / (60 * 60));
            const minutes = Math.floor((timeLeft % (60 * 60)) / 60);
            
            document.getElementById('timeRemaining').textContent = `${days}d ${hours}h ${minutes}m`;
            
            // Update progress bar
            const progress = (timeLeft / totalTime) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            
            if (timeLeft > 0) {
                timeLeft--;
            }
        }

        function toggleEngine() {
            if (!engineRunning) {
                showEngineModal();
            } else {
                engineRunning = false;
                updateEngineButton();
            }
        }

        function showEngineModal() {
            document.getElementById('engineModal').classList.remove('hidden');
        }

        function hideEngineModal() {
            document.getElementById('engineModal').classList.add('hidden');
        }

        function confirmEngine() {
            engineRunning = true;
            updateEngineButton();
            hideEngineModal();
        }

        function updateEngineButton() {
            const btn = document.getElementById('engineBtn');
            const text = document.getElementById('engineText');
            
            if (engineRunning) {
                btn.className = 'w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-105 flex items-center justify-center space-x-3';
                text.textContent = 'Stop Engine';
            } else {
                btn.className = 'w-full bg-mercedes-blue hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 hover:scale-105 flex items-center justify-center space-x-3';
                text.textContent = 'Start Engine';
            }
        }

        function toggleLock() {
            vehicleLocked = !vehicleLocked;
            updateLockButton();
        }

        function updateLockButton() {
            const btn = document.getElementById('lockBtn');
            const icon = document.getElementById('lockIcon');
            const text = document.getElementById('lockText');
            
            if (vehicleLocked) {
                btn.className = 'flex flex-col items-center p-4 border-2 border-green-500 bg-green-50 rounded-xl hover:bg-green-100 transition-colors';
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/>';
                text.textContent = 'Locked';
                text.className = 'text-sm font-bold text-green-600';
                btn.querySelector('.text-xs').textContent = 'Tap to unlock';
            } else {
                btn.className = 'flex flex-col items-center p-4 border-2 border-red-500 bg-red-50 rounded-xl hover:bg-red-100 transition-colors';
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0v4m0 0H6a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-4m-6 0V9a2 2 0 012-2 2 2 0 012 2v2m-4 0h4"/>';
                text.textContent = 'Unlocked';
                text.className = 'text-sm font-bold text-red-600';
                btn.querySelector('.text-xs').textContent = 'Tap to lock';
            }
        }

        function showHornModal() {
            document.getElementById('hornModal').classList.remove('hidden');
        }

        function hideHornModal() {
            document.getElementById('hornModal').classList.add('hidden');
        }

        function confirmHorn() {
            console.log('Horn activated');
            hideHornModal();
            // Show feedback
            const originalText = event.target.textContent;
            event.target.textContent = 'Horn Activated!';
            setTimeout(() => {
                event.target.textContent = originalText;
            }, 2000);
        }

        // Set the expiration date to June 25, 2025, 23:30:00
        const expirationDate = new Date('2025-06-25T23:30:00');
        
        // Function to update countdown
        function updateCountdown() {
            const now = new Date();
            const diff = expirationDate - now;
            
            if (diff <= 0) {
                document.getElementById('timeRemaining').textContent = 'Expired';
                document.getElementById('progressBar').style.width = '0%';
                document.getElementById('progressBar').classList.remove('from-green-500', 'to-mercedes-blue');
                document.getElementById('progressBar').classList.add('bg-red-500');
                return;
            }
            
            // Calculate days, hours, minutes
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            // Update the countdown display
            document.getElementById('timeRemaining').textContent = `${days}d ${hours}h ${minutes}m`;
            
            // Calculate percentage of time remaining (assuming 30-day access period)
            const totalPeriod = 30 * 24 * 60 * 60 * 1000; // 30 days in milliseconds
            const timePassed = totalPeriod - diff;
            const percentage = Math.max(0, Math.min(100, (timePassed / totalPeriod) * 100));
            
            // Update progress bar
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = `${percentage}%`;
            
            // Change color based on time remaining
            progressBar.classList.remove('from-green-500', 'to-mercedes-blue', 'from-yellow-500', 'to-yellow-400', 'from-red-500', 'to-red-400');
            progressBar.classList.remove('bg-red-500', 'bg-yellow-500', 'bg-gradient-to-r');
            
            if (days < 1) {
                progressBar.classList.add('bg-gradient-to-r', 'from-red-400', 'to-orange-400');
            } else if (days < 3) {
                progressBar.classList.add('bg-gradient-to-r', 'from-orange-400', 'to-yellow-400');
            } else {
                progressBar.classList.add('bg-gradient-to-r', 'from-green-500', 'to-mercedes-blue');
            }
        }
        
        // Initialize and update countdown every minute
        updateCountdown();
        setInterval(updateCountdown, 60000); // Update every minute

        // Close modals when clicking outside
        document.getElementById('hornModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideHornModal();
            }
        });

        document.getElementById('engineModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideEngineModal();
            }
        });
    </script>
</body>
</html>